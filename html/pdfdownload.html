<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>PDF 強制下載 (相容版)</title>
    <style>
        body { font-family: sans-serif; background: #f4f4f9; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .card { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); width: 550px; }
        textarea { width: 100%; height: 100px; padding: 10px; border: 1px solid #ccc; border-radius: 5px; margin: 10px 0; font-size: 14px; }
        button { width: 100%; padding: 15px; background: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; }
        .tips { font-size: 12px; color: #666; margin-top: 10px; }
    </style>
</head>
<body>

<div class="card">
    <h2>批量下載器 (相容 IDM 模式)</h2>
    <p>輸入網址 (用逗號 `,` 分隔)：</p>
    <textarea id="urlInput" placeholder="https://api1.com/p.pdf, https://api2.com/p.pdf"></textarea>
    <button onclick="triggerDownloads()">立即下載所有檔案</button>
    <p class="tips">※ 若瀏覽器攔截，請點擊網址列右側的「允許彈出視窗」。</p>
</div>

<script>
    function triggerDownloads() {
        const input = document.getElementById('urlInput').value.trim();
        if (!input) return alert("請輸入網址");

        const urls = input.split(',').map(u => u.trim()).filter(u => u !== "");

        urls.forEach((url, index) => {
            // 使用延遲下載，避免瀏覽器瞬間關閉多個下載連線
            setTimeout(() => {
                const a = document.createElement('a');
                a.href = url;
                
                // 這裡嘗試加入 download 屬性
                // 雖然跨網域會失效，但對部分 API 仍有提示作用
                a.download = ""; 
                
                // 強制隱藏並加入頁面
                a.style.display = 'none';
                document.body.appendChild(a);
                
                // 模擬點擊
                a.click();
                
                // 移除標籤
                document.body.removeChild(a);
                
                console.log(`觸發第 ${index + 1} 個檔案`);
            }, index * 1000); // 每個檔案間隔 1 秒，提高成功率
        });
    }
</script>

</body>
</html>
