<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å€‹äººè¨˜å¸³çµ±è¨ˆ - é¤é£²åˆ†æ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #f7f9fc;
            color: #333;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        h2 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 20px;
        }
        
        /* é ‚éƒ¨å¡ç‰‡å€ */
        .summary-cards {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        .card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            flex: 1;
            text-align: center;
        }
        .card h3 {
            margin: 0 0 10px 0;
            font-size: 14px;
            color: #666;
            font-weight: normal;
        }
        .card .amount {
            font-size: 28px;
            font-weight: 700;
            color: #e74c3c; /* æ”¯å‡ºç´… */
        }
        .card .count {
            font-size: 28px;
            font-weight: 700;
            color: #3498db;
        }

        /* åœ–è¡¨å€ */
        .chart-box {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            margin-bottom: 20px;
            height: 300px;
            display: flex;
            justify-content: center;
        }

        /* è¡¨æ ¼å€ */
        .table-box {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            overflow-x: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }
        th {
            text-align: left;
            padding: 12px;
            border-bottom: 2px solid #f1f1f1;
            color: #888;
        }
        td {
            padding: 12px;
            border-bottom: 1px solid #f1f1f1;
        }
        tr:last-child td {
            border-bottom: none;
        }
        .money {
            text-align: right;
            font-family: monospace;
            font-weight: 600;
        }
        .tag {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            background: #eee;
            color: #555;
        }
        .tag-lunch { background: #e3f2fd; color: #1565c0; }
        .tag-breakfast { background: #fff3e0; color: #ef6c00; }
        .tag-dinner { background: #f3e5f5; color: #7b1fa2; }
        .tag-tea { background: #e0f2f1; color: #00695c; }
    </style>
</head>
<body>

<div class="container">
    <h2>ğŸ½ï¸ é¤é£²æ”¯å‡ºçµ±è¨ˆ</h2>

    <div class="summary-cards">
        <div class="card">
            <h3>ç¸½æ”¯å‡ºé‡‘é¡</h3>
            <div class="amount" id="totalAmount">0</div>
        </div>
        <div class="card">
            <h3>ç¸½ç­†æ•¸</h3>
            <div class="count" id="totalCount">0</div>
        </div>
        <div class="card">
            <h3>å¹³å‡æ¯é¤</h3>
            <div class="count" id="avgAmount" style="color: #666;">0</div>
        </div>
    </div>

    <div class="chart-box">
        <canvas id="subCategoryChart"></canvas>
    </div>

    <div class="table-box">
        <h3>ğŸ“ è©³ç´°è¨˜éŒ„</h3>
        <table id="recordTable">
            <thead>
                <tr>
                    <th>æ—¥æœŸ</th>
                    <th>æ™‚æ®µ (å­é¡åˆ¥)</th>
                    <th>é …ç›®</th>
                    <th style="text-align: right;">é‡‘é¡</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
</div>

<script>
    // 1. æ‚¨çš„åŸå§‹è³‡æ–™ (ç›´æ¥åµŒå…¥)
    // æ ¼å¼ï¼šæ‘˜è¦, é¡å‹, å­é¡åˆ¥, æ—¥æœŸ, é‡‘é¡
    const rawCsvData = `
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2026å¹´1æœˆ30æ—¥ ä¸Šåˆ8:45 (GMT+8),110
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2026å¹´1æœˆ29æ—¥ ä¸Šåˆ9:46 (GMT+8),120
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2026å¹´1æœˆ30æ—¥ ä¸Šåˆ8:01 (GMT+8),49
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2026å¹´1æœˆ28æ—¥ ä¸Šåˆ7:59 (GMT+8),100
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2026å¹´1æœˆ19æ—¥ ä¸Šåˆ8:21 (GMT+8),100
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2026å¹´1æœˆ21æ—¥ ä¸Šåˆ9:44 (GMT+8),110
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2026å¹´1æœˆ19æ—¥ ä¸Šåˆ7:52 (GMT+8),145
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2026å¹´1æœˆ26æ—¥ ä¸Šåˆ10:35 (GMT+8),75
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2026å¹´1æœˆ9æ—¥ ä¸Šåˆ8:02 (GMT+8),35
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2026å¹´1æœˆ8æ—¥ ä¸Šåˆ8:08 (GMT+8),180
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2026å¹´1æœˆ15æ—¥ ä¸Šåˆ11:57 (GMT+8),89
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´12æœˆ18æ—¥ ä¸‹åˆ2:18 (GMT+8),169
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2025å¹´12æœˆ17æ—¥ ä¸Šåˆ7:52 (GMT+8),167
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2026å¹´1æœˆ6æ—¥ ä¸Šåˆ8:33 (GMT+8),42
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´12æœˆ16æ—¥ ä¸‹åˆ5:33 (GMT+8),100
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2025å¹´12æœˆ10æ—¥ ä¸Šåˆ8:08 (GMT+8),45
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2025å¹´12æœˆ2æ—¥ ä¸Šåˆ8:08 (GMT+8),84
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´12æœˆ1æ—¥ ä¸Šåˆ9:43 (GMT+8),100
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2025å¹´11æœˆ26æ—¥ ä¸Šåˆ8:05 (GMT+8),89
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´11æœˆ17æ—¥ ä¸Šåˆ9:42 (GMT+8),100
é¤é£²-æ™šé¤,é¤é£²,æ™šé¤,2026å¹´1æœˆ15æ—¥ ä¸‹åˆ6:16 (GMT+8),125
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2026å¹´1æœˆ29æ—¥ ä¸Šåˆ8:35 (GMT+8),36
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´11æœˆ14æ—¥ ä¸Šåˆ8:35 (GMT+8),120
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´11æœˆ26æ—¥ ä¸‹åˆ1:16 (GMT+8),173
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2026å¹´1æœˆ28æ—¥ ä¸Šåˆ7:58 (GMT+8),36
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2026å¹´1æœˆ16æ—¥ ä¸‹åˆ12:11 (GMT+8),99
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2026å¹´1æœˆ12æ—¥ ä¸‹åˆ3:27 (GMT+8),120
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2026å¹´1æœˆ14æ—¥ ä¸Šåˆ9:07 (GMT+8),155
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2026å¹´1æœˆ13æ—¥ ä¸Šåˆ9:42 (GMT+8),100
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2025å¹´11æœˆ6æ—¥ ä¸Šåˆ8:02 (GMT+8),110
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2025å¹´11æœˆ11æ—¥ ä¸Šåˆ8:00 (GMT+8),74
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2026å¹´1æœˆ13æ—¥ ä¸Šåˆ8:10 (GMT+8),36
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2026å¹´1æœˆ6æ—¥ ä¸Šåˆ9:45 (GMT+8),110
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´10æœˆ30æ—¥ ä¸Šåˆ9:59 (GMT+8),110
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2025å¹´12æœˆ26æ—¥ ä¸Šåˆ8:04 (GMT+8),84
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´10æœˆ28æ—¥ ä¸Šåˆ9:42 (GMT+8),100
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2025å¹´12æœˆ29æ—¥ ä¸Šåˆ7:52 (GMT+8),39
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2025å¹´12æœˆ27æ—¥ ä¸Šåˆ8:18 (GMT+8),94
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2025å¹´12æœˆ24æ—¥ ä¸Šåˆ7:49 (GMT+8),84
é¤é£²-æ™šé¤,é¤é£²,æ™šé¤,2025å¹´10æœˆ20æ—¥ ä¸‹åˆ6:33 (GMT+8),125
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´11æœˆ11æ—¥ ä¸‹åˆ6:21 (GMT+8),169
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´10æœˆ20æ—¥ ä¸Šåˆ9:44 (GMT+8),100
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2025å¹´12æœˆ12æ—¥ ä¸Šåˆ8:03 (GMT+8),45
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2025å¹´10æœˆ29æ—¥ ä¸Šåˆ8:02 (GMT+8),74
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2025å¹´12æœˆ29æ—¥ ä¸Šåˆ7:51 (GMT+8),179
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2025å¹´12æœˆ11æ—¥ ä¸Šåˆ7:58 (GMT+8),55
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2026å¹´1æœˆ2æ—¥ ä¸‹åˆ2:09 (GMT+8),127
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´12æœˆ22æ—¥ ä¸Šåˆ10:15 (GMT+8),100
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2025å¹´12æœˆ9æ—¥ ä¸Šåˆ7:58 (GMT+8),86
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2026å¹´1æœˆ12æ—¥ ä¸Šåˆ8:06 (GMT+8),31
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2026å¹´1æœˆ5æ—¥ ä¸Šåˆ9:39 (GMT+8),100
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´12æœˆ23æ—¥ ä¸Šåˆ7:50 (GMT+8),75
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2026å¹´1æœˆ5æ—¥ ä¸Šåˆ7:52 (GMT+8),64
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´12æœˆ8æ—¥ ä¸Šåˆ9:45 (GMT+8),100
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´12æœˆ3æ—¥ ä¸‹åˆ2:14 (GMT+8),100
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´11æœˆ28æ—¥ ä¸Šåˆ10:01 (GMT+8),130
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2025å¹´11æœˆ27æ—¥ ä¸Šåˆ7:56 (GMT+8),79
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´12æœˆ11æ—¥ ä¸‹åˆ12:10 (GMT+8),58
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´12æœˆ10æ—¥ ä¸‹åˆ12:59 (GMT+8),89
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2025å¹´10æœˆ20æ—¥ ä¸Šåˆ8:48 (GMT+8),89
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´10æœˆ14æ—¥ ä¸‹åˆ8:57 (GMT+8),121
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´10æœˆ13æ—¥ ä¸‹åˆ8:58 (GMT+8),100
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´10æœˆ15æ—¥ ä¸Šåˆ9:34 (GMT+8),110
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´10æœˆ9æ—¥ ä¸‹åˆ5:12 (GMT+8),132
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´11æœˆ18æ—¥ ä¸Šåˆ8:08 (GMT+8),169
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´11æœˆ25æ—¥ ä¸Šåˆ11:36 (GMT+8),100
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2025å¹´10æœˆ22æ—¥ ä¸Šåˆ8:05 (GMT+8),74
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´11æœˆ25æ—¥ ä¸Šåˆ11:35 (GMT+8),120
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2025å¹´11æœˆ18æ—¥ ä¸Šåˆ8:04 (GMT+8),94
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2025å¹´11æœˆ19æ—¥ ä¸Šåˆ8:08 (GMT+8),50
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2025å¹´11æœˆ17æ—¥ ä¸Šåˆ7:53 (GMT+8),13
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´10æœˆ7æ—¥ ä¸‹åˆ5:11 (GMT+8),90
é¤é£²-æ™šé¤,é¤é£²,æ™šé¤,2025å¹´11æœˆ12æ—¥ ä¸‹åˆ6:21 (GMT+8),125
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´11æœˆ12æ—¥ ä¸‹åˆ6:21 (GMT+8),141
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´11æœˆ13æ—¥ ä¸Šåˆ11:22 (GMT+8),110
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2025å¹´10æœˆ13æ—¥ ä¸Šåˆ8:28 (GMT+8),64
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2025å¹´11æœˆ14æ—¥ ä¸Šåˆ8:03 (GMT+8),74
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´11æœˆ10æ—¥ ä¸Šåˆ8:00 (GMT+8),100
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2025å¹´11æœˆ3æ—¥ ä¸Šåˆ8:10 (GMT+8),55
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´11æœˆ5æ—¥ ä¸Šåˆ11:52 (GMT+8),124
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´11æœˆ4æ—¥ ä¸Šåˆ9:39 (GMT+8),82
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´11æœˆ3æ—¥ ä¸Šåˆ9:45 (GMT+8),100
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´11æœˆ4æ—¥ ä¸Šåˆ11:52 (GMT+8),25
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´10æœˆ31æ—¥ ä¸Šåˆ8:34 (GMT+8),120
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´10æœˆ29æ—¥ ä¸Šåˆ10:04 (GMT+8),110
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´10æœˆ23æ—¥ ä¸‹åˆ2:01 (GMT+8),169
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´10æœˆ22æ—¥ ä¸Šåˆ8:42 (GMT+8),120
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2025å¹´10æœˆ21æ—¥ ä¸Šåˆ7:57 (GMT+8),94
é¤é£²-ä¸‹åˆèŒ¶,é¤é£²,ä¸‹åˆèŒ¶,2025å¹´10æœˆ19æ—¥ ä¸‹åˆ1:48 (GMT+8),65
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´10æœˆ21æ—¥ ä¸Šåˆ9:55 (GMT+8),110
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´10æœˆ16æ—¥ ä¸Šåˆ9:16 (GMT+8),120
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2025å¹´10æœˆ15æ—¥ ä¸Šåˆ8:09 (GMT+8),74
é¤é£²-ä¸‹åˆèŒ¶,é¤é£²,ä¸‹åˆèŒ¶,2025å¹´10æœˆ17æ—¥ ä¸‹åˆ1:28 (GMT+8),65
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´10æœˆ17æ—¥ ä¸Šåˆ9:56 (GMT+8),70
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2025å¹´10æœˆ16æ—¥ ä¸Šåˆ7:57 (GMT+8),25
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´11æœˆ20æ—¥ ä¸Šåˆ11:35 (GMT+8),175
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´11æœˆ20æ—¥ ä¸Šåˆ8:02 (GMT+8),175
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´10æœˆ27æ—¥ ä¸Šåˆ9:39 (GMT+8),100
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2025å¹´10æœˆ31æ—¥ ä¸Šåˆ7:51 (GMT+8),42
é¤é£²-æ—©é¤,é¤é£²,æ—©é¤,2025å¹´11æœˆ21æ—¥ ä¸Šåˆ7:57 (GMT+8),59
é¤é£²-åˆé¤,é¤é£²,åˆé¤,2025å¹´10æœˆ8æ—¥ ä¸‹åˆ5:11 (GMT+8),65
é¤é£²-æ™šé¤,é¤é£²,æ™šé¤,2025å¹´11æœˆ18æ—¥ ä¸Šåˆ8:08 (GMT+8),175
`;

    // 2. è§£æè³‡æ–™çš„å‡½æ•¸
    function parseData(csv) {
        const lines = csv.trim().split('\n');
        const result = [];
        
        lines.forEach(line => {
            if (!line.trim()) return;
            // è™•ç†CSVå¯èƒ½çš„ç©ºè¡Œæˆ–ä¸è¦å‰‡æ ¼å¼
            const parts = line.split(',');
            if (parts.length < 5) return;

            // æå–æ¬„ä½
            const item = parts[0];
            const subCategory = parts[2]; // åˆé¤, æ—©é¤
            const dateStr = parts[3]; // 2026å¹´1æœˆ30æ—¥...
            const amount = parseInt(parts[4]);

            // æ—¥æœŸæ ¼å¼åŒ–ï¼šå¾ "2026å¹´1æœˆ30æ—¥..." è½‰ç‚º "2026-01-30"
            let formattedDate = dateStr;
            const dateMatch = dateStr.match(/(\d{4})å¹´(\d{1,2})æœˆ(\d{1,2})æ—¥/);
            if (dateMatch) {
                const y = dateMatch[1];
                const m = dateMatch[2].padStart(2, '0');
                const d = dateMatch[3].padStart(2, '0');
                formattedDate = `${y}-${m}-${d}`;
            }

            result.push({
                date: formattedDate,
                item: item,
                subCategory: subCategory,
                amount: amount
            });
        });
        
        // ä¾æ—¥æœŸæ’åº (æ–°åˆ°èˆŠ)
        return result.sort((a, b) => new Date(b.date) - new Date(a.date));
    }

    // 3. åŸ·è¡Œçµ±è¨ˆèˆ‡æ¸²æŸ“
    function init() {
        const data = parseData(rawCsvData);
        let total = 0;
        const subCounts = {}; // å„åˆ†é¡é‡‘é¡çµ±è¨ˆ

        // è¡¨æ ¼å¡«å……
        const tbody = document.querySelector("#recordTable tbody");
        
        data.forEach(t => {
            total += t.amount;
            
            if (!subCounts[t.subCategory]) subCounts[t.subCategory] = 0;
            subCounts[t.subCategory] += t.amount;

            // æ¨£å¼æ¨™ç±¤
            let tagClass = '';
            if (t.subCategory.includes('åˆé¤')) tagClass = 'tag-lunch';
            else if (t.subCategory.includes('æ—©é¤')) tagClass = 'tag-breakfast';
            else if (t.subCategory.includes('æ™šé¤')) tagClass = 'tag-dinner';
            else if (t.subCategory.includes('ä¸‹åˆèŒ¶')) tagClass = 'tag-tea';

            const row = `
                <tr>
                    <td>${t.date}</td>
                    <td><span class="tag ${tagClass}">${t.subCategory}</span></td>
                    <td>${t.item}</td>
                    <td class="money">$${t.amount}</td>
                </tr>
            `;
            tbody.innerHTML += row;
        });

        // æ•¸å€¼æ›´æ–°
        document.getElementById("totalAmount").innerText = `$${total.toLocaleString()}`;
        document.getElementById("totalCount").innerText = data.length + " ç­†";
        document.getElementById("avgAmount").innerText = `$${Math.round(total / data.length)} / ç­†`;

        // åœ–è¡¨ç¹ªè£½
        const ctx = document.getElementById('subCategoryChart').getContext('2d');
        new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: Object.keys(subCounts),
                datasets: [{
                    data: Object.values(subCounts),
                    backgroundColor: [
                        '#42a5f5', // åˆé¤è—
                        '#ffa726', // æ—©é¤æ©˜
                        '#ab47bc', // æ™šé¤ç´«
                        '#26a69a', // ä¸‹åˆèŒ¶ç¶ 
                        '#ef5350'  // å…¶ä»–
                    ],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'right' },
                    title: { display: true, text: 'å„æ™‚æ®µé¤è²»ä½”æ¯”' }
                }
            }
        });
    }

    init();
</script>

</body>
</html>
