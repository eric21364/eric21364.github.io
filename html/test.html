<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>卡片列表</title>
<style>
  :root{
    --bg1:#f7d6e6;
    --bg2:#fbe9f2;
    --card:#ffffffcc;
    --pink:#ff6fa5;
    --pink2:#ff86b4;
    --text:#4a2b36;
    --muted:#7b5a66;
    --shadow: 0 10px 22px rgba(0,0,0,.12);
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans TC", sans-serif;
    color:var(--text);
    background: radial-gradient(1200px 600px at 30% 10%, var(--bg2), var(--bg1));
  }

  .app{
    max-width: 520px; /* 模擬手機 */
    margin: 0 auto;
    min-height: 100vh;
    padding: 12px 12px 78px;
  }

  .card{
    position: relative;
    display:flex;
    gap: 10px;
    padding: 12px;
    margin: 10px 0 16px;
    border-radius: 18px;
    background: var(--card);
    box-shadow: var(--shadow);
    backdrop-filter: blur(6px);
    overflow: hidden;
  }

  .thumb{
    width: 130px;
    min-width: 130px;
    height: 170px;
    border-radius: 16px;
    overflow:hidden;
    position: relative;
    background:#eee;
  }
  .thumb img{width:100%; height:100%; object-fit:cover; display:block;}
  .score{
    position:absolute;
    left: 8px;
    bottom: 8px;
    background:#fff;
    color:#ff2f7c;
    font-weight: 800;
    border-radius: 999px;
    padding: 4px 10px;
    box-shadow: 0 6px 14px rgba(0,0,0,.15);
  }
  .badge{
    position:absolute;
    right: 8px;
    top: 8px;
    background: rgba(255,255,255,.75);
    border: 1px solid rgba(255,111,165,.35);
    color:#ff2f7c;
    border-radius: 10px;
    padding: 3px 8px;
    font-size: 12px;
    font-weight: 700;
  }

  .content{
    flex:1;
    padding-right: 54px; /* 留給右側直排 */
  }

  .namebar{
    display:flex;
    align-items:center;
    gap: 8px;
    margin-bottom: 8px;
  }
  .pill{
    background: linear-gradient(90deg, var(--pink), var(--pink2));
    color:#fff;
    border-radius: 999px;
    padding: 6px 10px;
    font-weight: 800;
    box-shadow: 0 8px 16px rgba(255,111,165,.25);
    line-height:1;
  }
  .sub{
    color: var(--muted);
    font-weight: 700;
    font-size: 13px;
  }

  .grid{
    display:grid;
    grid-template-columns: 60px 1fr;
    gap: 6px 10px;
    font-size: 13px;
    line-height: 1.15;
  }
  .k{ color: var(--muted); font-weight: 700;}
  .v{ color: var(--text); font-weight: 800;}
  .v.highlight{ color:#ff2f7c; }

  .rank{
    position:absolute;
    right: 12px;
    top: 10px;
    width: 36px;
    height: 36px;
    border-radius: 12px;
    background: #e9f1ff;
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight: 900;
    color:#3a77ff;
    box-shadow: 0 10px 18px rgba(58,119,255,.15);
  }

  .side{
    position:absolute;
    right: 10px;
    top: 54px;
    width: 42px;
    border-radius: 16px;
    background: rgba(111, 73, 255, 0.14);
    border: 1px solid rgba(111, 73, 255, 0.18);
    padding: 8px 6px;
    display:flex;
    flex-direction: column;
    gap: 10px;
    align-items:center;
  }
  .side .item{
    display:flex;
    flex-direction:column;
    align-items:center;
    gap: 3px;
    color:#6a3cff;
    font-weight: 900;
    font-size: 12px;
  }
  .ico{
    width: 18px; height:18px;
    display:inline-block;
  }
  .ico svg{width:100%; height:100%;}
  .tabbar{
    position: fixed;
    left: 50%;
    transform: translateX(-50%);
    bottom: 0;
    width: min(520px, 100%);
    background: rgba(255,255,255,.75);
    backdrop-filter: blur(10px);
    border-top: 1px solid rgba(0,0,0,.06);
    display:flex;
    justify-content: space-around;
    padding: 10px 6px 14px;
  }
  .tab{
    display:flex;
    flex-direction:column;
    align-items:center;
    gap: 4px;
    font-size: 12px;
    color: #7a5c66;
    font-weight: 800;
  }
  .tab.active{ color:#ff2f7c; }
</style>
</head>
<body>
<div class="app" id="app"></div>
<div class="tabbar" id="tabbar"></div>

<script>
  const ICONS = {
    like: `<svg viewBox="0 0 24 24" fill="none"><path d="M12 21s-7-4.5-9.5-8.8C.5 8.2 3 5.5 6.2 5.5c1.8 0 3.1 1 3.8 2 0 0 .8-2 3.9-2 3.2 0 5.7 2.7 3.7 6.7C19 16.5 12 21 12 21Z" fill="#8b5cf6"/></svg>`,
    star: `<svg viewBox="0 0 24 24" fill="none"><path d="M12 2l2.9 6.3 6.9.6-5.2 4.5 1.6 6.7L12 16.8 5.8 20l1.6-6.7L2.2 8.9l6.9-.6L12 2Z" fill="#8b5cf6"/></svg>`,
    chat: `<svg viewBox="0 0 24 24" fill="none"><path d="M4 4h16v12H7l-3 3V4Z" fill="#8b5cf6"/></svg>`
  };

  async function main(){
    const res = await fetch('https://raw.githubusercontent.com/eric21364/eric21364.github.io/refs/heads/main/html/data.json');
    const data = await res.json();
    renderCards(data.cards || []);
    renderTabs(data.tabs || []);
  }

  function renderCards(cards){
    const app = document.getElementById('app');
    app.innerHTML = cards.map(c => {
      const fieldsHtml = (c.fields||[]).map(f => `
        <div class="k">${escapeHtml(f.k)}：</div>
        <div class="v ${f.highlight ? 'highlight':''}">${escapeHtml(f.v)}</div>
      `).join('');

      const sideHtml = (c.sideStats||[]).map(s => `
        <div class="item">
          <span class="ico">${ICONS[s.icon] || ''}</span>
          <span>${escapeHtml(String(s.value ?? ''))}</span>
        </div>
      `).join('');

      const badges = (c.badges||[]).slice(0,2).map(b => `<div class="badge">${escapeHtml(b)}</div>`).join('');

      return `
        <div class="card">
          <div class="thumb">
            <img src="${escapeAttr(c.thumb||'')}" alt="">
            ${badges}
            <div class="score">${escapeHtml(String(c.score ?? ''))} 分</div>
          </div>

          <div class="content">
            <div class="namebar">
              <div class="pill">${escapeHtml(c.name||'')}</div>
              <div class="sub">${escapeHtml(c.subtitle||'')}</div>
            </div>
            <div class="grid">${fieldsHtml}</div>
          </div>

          <div class="rank">${escapeHtml(String(c.rank ?? ''))}</div>
          <div class="side">${sideHtml}</div>
        </div>
      `;
    }).join('');
  }

  function renderTabs(tabs){
    const tb = document.getElementById('tabbar');
    tb.innerHTML = tabs.map((t, i) => `
      <div class="tab ${i===0?'active':''}" data-key="${escapeAttr(t.key)}">
        <div style="width:22px;height:22px;border-radius:8px;background:#ffd1e2;opacity:.9"></div>
        <div>${escapeHtml(t.label||'')}</div>
      </div>
    `).join('');
  }

  function escapeHtml(s){
    return String(s).replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]));
  }
  function escapeAttr(s){ return escapeHtml(s); }

  main();
</script>
</body>
</html>
